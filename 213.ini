#!/bin/bash

n="$1" # Получаем имя команды или файла из первого аргумента

# Проверяем, является ли это встроенной командой или ключевым словом
if [[ $(type -t "$n") == "builtin" || $(type -t "$n") == "keyword" ]]; then
    echo "$n является внутренней программой"

# Проверяем, является ли это внешней программой (находится в PATH)
elif [[ $(type -t "$n") == "file" ]]; then
    path_to_command=$(command -v "$n")
    echo "$n является внешней программой с путём: $path_to_command"

# Если команда не найдена
else
    # Проверяем, находится ли файл в текущей директории
    if [[ -x "./$n" && ! -d "./$n" ]]; then
        echo "$n найден в текущей директории: $(pwd)/$n"
    else
        echo "$n не является ни встроенной командой, ни внешней программой."
    fi
fi

# Функция для поиска команды в PATH
my_which() {
    local cmd="$1"
    local IFS=':' # Разделитель для PATH
    # Итерируемся по директориям, указанным в PATH
    for dir in $PATH; do
        # Проверяем, существует ли файл и является ли он исполняемым
        if [[ -x "$dir/$cmd" && ! -d "$dir/$cmd" ]]; then
            echo "$dir/$cmd"
            return 0
        fi
    done
    return 1 # Если файл не найден
}

# Основной код
if my_which "$n"; then
    echo "$n найден в PATH."
elif [[ -x "./$n" && ! -d "./$n" ]]; then
    echo "$n найден в текущей директории: $(pwd)/$n"
else
    echo "Ошибка: $n не найден в PATH и текущей директории."
fi

